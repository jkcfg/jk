var t=t||{};t.Format={Auto:0,JSON:1,YAML:2,Raw:3};t.WriteArgs=function(){this.bb=null;this.bb_pos=0};t.WriteArgs.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};t.WriteArgs.getRootAsWriteArgs=function(e,r){return(r||new t.WriteArgs).__init(e.readInt32(e.position())+e.position(),e)};t.WriteArgs.prototype.path=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};t.WriteArgs.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null};t.WriteArgs.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):t.Format.Auto};t.WriteArgs.prototype.indent=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt8(this.bb_pos+t):0};t.WriteArgs.startWriteArgs=function(t){t.startObject(4)};t.WriteArgs.addPath=function(t,e){t.addFieldOffset(0,e,0)};t.WriteArgs.addValue=function(t,e){t.addFieldOffset(1,e,0)};t.WriteArgs.addType=function(e,r){e.addFieldInt8(2,r,t.Format.Auto)};t.WriteArgs.addIndent=function(t,e){t.addFieldInt8(3,e,0)};t.WriteArgs.endWriteArgs=function(t){var e=t.endObject();return e};var e=e||{};e.Args={NONE:0,WriteArgs:1,ReadArgs:2,CancelArgs:3,FileInfoArgs:4,ListArgs:5};e.Message=function(){this.bb=null;this.bb_pos=0};e.Message.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};e.Message.getRootAsMessage=function(t,r){return(r||new e.Message).__init(t.readInt32(t.position())+t.position(),t)};e.Message.prototype.argsType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):e.Args.NONE};e.Message.prototype.args=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__union(t,this.bb_pos+e):null};e.Message.startMessage=function(t){t.startObject(2)};e.Message.addArgsType=function(t,r){t.addFieldInt8(0,r,e.Args.NONE)};e.Message.addArgs=function(t,e){t.addFieldOffset(1,e,0)};e.Message.endMessage=function(t){var e=t.endObject();return e};var r={};r.SIZEOF_SHORT=2;r.SIZEOF_INT=4;r.FILE_IDENTIFIER_LENGTH=4;r.Encoding={UTF8_BYTES:1,UTF16_STRING:2};r.int32=new Int32Array(2);r.float32=new Float32Array(r.int32.buffer);r.float64=new Float64Array(r.int32.buffer);r.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;r.Long=function(t,e){this.low=t|0;this.high=e|0};r.Long.create=function(t,e){return t==0&&e==0?r.Long.ZERO:new r.Long(t,e)};r.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296};r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high};r.Long.ZERO=new r.Long(0,0);r.Builder=function(t){if(!t){var e=1024}else{var e=t}this.bb=r.ByteBuffer.allocate(e);this.space=e;this.minalign=1;this.vtable=null;this.vtable_in_use=0;this.isNested=false;this.object_start=0;this.vtables=[];this.vector_num_elems=0;this.force_defaults=false};r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t};r.Builder.prototype.dataBuffer=function(){return this.bb};r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};r.Builder.prototype.asArrayBuffer=function(){return this.bb.bytes().buffer.slice(this.bb.position(),this.bb.position()+this.offset())};r.Builder.prototype.prep=function(t,e){if(t>this.minalign){this.minalign=t}var i=~(this.bb.capacity()-this.space+e)+1&t-1;while(this.space<i+t+e){var s=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb);this.space+=this.bb.capacity()-s}this.pad(i)};r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++){this.bb.writeInt8(--this.space,0)}};r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)};r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)};r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)};r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)};r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)};r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)};r.Builder.prototype.addInt8=function(t){this.prep(1,0);this.writeInt8(t)};r.Builder.prototype.addInt16=function(t){this.prep(2,0);this.writeInt16(t)};r.Builder.prototype.addInt32=function(t){this.prep(4,0);this.writeInt32(t)};r.Builder.prototype.addInt64=function(t){this.prep(8,0);this.writeInt64(t)};r.Builder.prototype.addFloat32=function(t){this.prep(4,0);this.writeFloat32(t)};r.Builder.prototype.addFloat64=function(t){this.prep(8,0);this.writeFloat64(t)};r.Builder.prototype.addFieldInt8=function(t,e,r){if(this.force_defaults||e!=r){this.addInt8(e);this.slot(t)}};r.Builder.prototype.addFieldInt16=function(t,e,r){if(this.force_defaults||e!=r){this.addInt16(e);this.slot(t)}};r.Builder.prototype.addFieldInt32=function(t,e,r){if(this.force_defaults||e!=r){this.addInt32(e);this.slot(t)}};r.Builder.prototype.addFieldInt64=function(t,e,r){if(this.force_defaults||!e.equals(r)){this.addInt64(e);this.slot(t)}};r.Builder.prototype.addFieldFloat32=function(t,e,r){if(this.force_defaults||e!=r){this.addFloat32(e);this.slot(t)}};r.Builder.prototype.addFieldFloat64=function(t,e,r){if(this.force_defaults||e!=r){this.addFloat64(e);this.slot(t)}};r.Builder.prototype.addFieldOffset=function(t,e,r){if(this.force_defaults||e!=r){this.addOffset(e);this.slot(t)}};r.Builder.prototype.addFieldStruct=function(t,e,r){if(e!=r){this.nested(e);this.slot(t)}};r.Builder.prototype.nested=function(t){if(t!=this.offset()){throw new Error("FlatBuffers: struct must be serialized inline.")}};r.Builder.prototype.notNested=function(){if(this.isNested){throw new Error("FlatBuffers: object serialization must not be nested.")}};r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()};r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};r.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472){throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.")}var i=e<<1;var s=r.ByteBuffer.allocate(i);s.setPosition(i-e);s.bytes().set(t.bytes(),i-e);return s};r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0);this.writeInt32(this.offset()-t+r.SIZEOF_INT)};r.Builder.prototype.startObject=function(t){this.notNested();if(this.vtable==null){this.vtable=[]}this.vtable_in_use=t;for(var e=0;e<t;e++){this.vtable[e]=0}this.isNested=true;this.object_start=this.offset()};r.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested){throw new Error("FlatBuffers: endObject called without startObject")}this.addInt32(0);var t=this.offset();var e=this.vtable_in_use-1;for(;e>=0&&this.vtable[e]==0;e--){}var i=e+1;for(;e>=0;e--){this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0)}var s=2;this.addInt16(t-this.object_start);var n=(i+s)*r.SIZEOF_SHORT;this.addInt16(n);var o=0;var a=this.space;t:for(e=0;e<this.vtables.length;e++){var f=this.bb.capacity()-this.vtables[e];if(n==this.bb.readInt16(f)){for(var u=r.SIZEOF_SHORT;u<n;u+=r.SIZEOF_SHORT){if(this.bb.readInt16(a+u)!=this.bb.readInt16(f+u)){continue t}}o=this.vtables[e];break}}if(o){this.space=this.bb.capacity()-t;this.bb.writeInt32(this.space,o-t)}else{this.vtables.push(this.offset());this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)}this.isNested=false;return t};r.Builder.prototype.finish=function(t,e){if(e){var i=e;this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH);if(i.length!=r.FILE_IDENTIFIER_LENGTH){throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH)}for(var s=r.FILE_IDENTIFIER_LENGTH-1;s>=0;s--){this.writeInt8(i.charCodeAt(s))}}this.prep(this.minalign,r.SIZEOF_INT);this.addOffset(t);this.bb.setPosition(this.space)};r.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t;var i=r-this.bb.readInt32(r);var s=this.bb.readInt16(i+e)!=0;if(!s){throw new Error("FlatBuffers: field "+e+" must be set")}};r.Builder.prototype.startVector=function(t,e,i){this.notNested();this.vector_num_elems=e;this.prep(r.SIZEOF_INT,t*e);this.prep(i,t*e)};r.Builder.prototype.endVector=function(){this.writeInt32(this.vector_num_elems);return this.offset()};r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array){var e=t}else{var e=[];var r=0;while(r<t.length){var i;var s=t.charCodeAt(r++);if(s<55296||s>=56320){i=s}else{var n=t.charCodeAt(r++);i=(s<<10)+n+(65536-(55296<<10)-56320)}if(i<128){e.push(i)}else{if(i<2048){e.push(i>>6&31|192)}else{if(i<65536){e.push(i>>12&15|224)}else{e.push(i>>18&7|240,i>>12&63|128)}e.push(i>>6&63|128)}e.push(i&63|128)}}}this.addInt8(0);this.startVector(1,e.length,1);this.bb.setPosition(this.space-=e.length);for(var r=0,o=this.space,a=this.bb.bytes();r<e.length;r++){a[o++]=e[r]}return this.endVector()};r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)};r.ByteBuffer=function(t){this.bytes_=t;this.position_=0};r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))};r.ByteBuffer.prototype.bytes=function(){return this.bytes_};r.ByteBuffer.prototype.position=function(){return this.position_};r.ByteBuffer.prototype.setPosition=function(t){this.position_=t};r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24};r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]};r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16};r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8};r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24};r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0};r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))};r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))};r.ByteBuffer.prototype.readFloat32=function(t){r.int32[0]=this.readInt32(t);return r.float32[0]};r.ByteBuffer.prototype.readFloat64=function(t){r.int32[r.isLittleEndian?0:1]=this.readInt32(t);r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4);return r.float64[0]};r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e};r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e};r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e;this.bytes_[t+1]=e>>8};r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e;this.bytes_[t+1]=e>>8};r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e;this.bytes_[t+1]=e>>8;this.bytes_[t+2]=e>>16;this.bytes_[t+3]=e>>24};r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e;this.bytes_[t+1]=e>>8;this.bytes_[t+2]=e>>16;this.bytes_[t+3]=e>>24};r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low);this.writeInt32(t+4,e.high)};r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low);this.writeUint32(t+4,e.high)};r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e;this.writeInt32(t,r.int32[0])};r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e;this.writeInt32(t,r.int32[r.isLittleEndian?0:1]);this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])};r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH){throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.")}var t="";for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++){t+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+e))}return t};r.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0};r.ByteBuffer.prototype.__union=function(t,e){t.bb_pos=e+this.readInt32(e);t.bb=this;return t};r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var i=this.readInt32(t);var s="";var n=0;t+=r.SIZEOF_INT;if(e===r.Encoding.UTF8_BYTES){return this.bytes_.subarray(t,t+i)}while(n<i){var o;var a=this.readUint8(t+n++);if(a<192){o=a}else{var f=this.readUint8(t+n++);if(a<224){o=(a&31)<<6|f&63}else{var u=this.readUint8(t+n++);if(a<240){o=(a&15)<<12|(f&63)<<6|u&63}else{var b=this.readUint8(t+n++);o=(a&7)<<18|(f&63)<<12|(u&63)<<6|b&63}}}if(o<65536){s+=String.fromCharCode(o)}else{o-=65536;s+=String.fromCharCode((o>>10)+55296,(o&(1<<10)-1)+56320)}}return s};r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)};r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT};r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))};r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH){throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH)}for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++){if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e)){return false}}return true};r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)};const i=Object.freeze(t.Format);function s(s,n="",{format:o=i.Auto,indent:a=2}={}){const f=new r.Builder(1024);const u=o===i.Raw?s.toString():JSON.stringify(s);const b=f.createString(u);const d=f.createString(n);t.WriteArgs.startWriteArgs(f);t.WriteArgs.addValue(f,b);t.WriteArgs.addPath(f,d);t.WriteArgs.addType(f,o);t.WriteArgs.addIndent(f,a);const h=t.WriteArgs.endWriteArgs(f);e.Message.startMessage(f);e.Message.addArgsType(f,e.Args.WriteArgs);e.Message.addArgs(f,h);const p=e.Message.endMessage(f);f.finish(p);V8Worker2.send(f.asArrayBuffer())}function n(t,e){s(t,"",e)}var o=o||{};o.DeferredRetval={NONE:0,Deferred:1,Error:2};o.FulfilmentValue={NONE:0,Data:1,EndOfStream:2,Error:3};o.CancelArgs=function(){this.bb=null;this.bb_pos=0};o.CancelArgs.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};o.CancelArgs.getRootAsCancelArgs=function(t,e){return(e||new o.CancelArgs).__init(t.readInt32(t.position())+t.position(),t)};o.CancelArgs.prototype.serial=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)};o.CancelArgs.startCancelArgs=function(t){t.startObject(1)};o.CancelArgs.addSerial=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))};o.CancelArgs.endCancelArgs=function(t){var e=t.endObject();return e};o.Deferred=function(){this.bb=null;this.bb_pos=0};o.Deferred.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};o.Deferred.getRootAsDeferred=function(t,e){return(e||new o.Deferred).__init(t.readInt32(t.position())+t.position(),t)};o.Deferred.prototype.serial=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)};o.Deferred.startDeferred=function(t){t.startObject(1)};o.Deferred.addSerial=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))};o.Deferred.endDeferred=function(t){var e=t.endObject();return e};o.DeferredResponse=function(){this.bb=null;this.bb_pos=0};o.DeferredResponse.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};o.DeferredResponse.getRootAsDeferredResponse=function(t,e){return(e||new o.DeferredResponse).__init(t.readInt32(t.position())+t.position(),t)};o.DeferredResponse.prototype.retvalType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):o.DeferredRetval.NONE};o.DeferredResponse.prototype.retval=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__union(t,this.bb_pos+e):null};o.DeferredResponse.startDeferredResponse=function(t){t.startObject(2)};o.DeferredResponse.addRetvalType=function(t,e){t.addFieldInt8(0,e,o.DeferredRetval.NONE)};o.DeferredResponse.addRetval=function(t,e){t.addFieldOffset(1,e,0)};o.DeferredResponse.endDeferredResponse=function(t){var e=t.endObject();return e};o.Data=function(){this.bb=null;this.bb_pos=0};o.Data.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};o.Data.getRootAsData=function(t,e){return(e||new o.Data).__init(t.readInt32(t.position())+t.position(),t)};o.Data.prototype.bytes=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0};o.Data.prototype.bytesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0};o.Data.prototype.bytesArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null};o.Data.startData=function(t){t.startObject(1)};o.Data.addBytes=function(t,e){t.addFieldOffset(0,e,0)};o.Data.createBytesVector=function(t,e){t.startVector(1,e.length,1);for(var r=e.length-1;r>=0;r--){t.addInt8(e[r])}return t.endVector()};o.Data.startBytesVector=function(t,e){t.startVector(1,e,1)};o.Data.endData=function(t){var e=t.endObject();return e};o.EndOfStream=function(){this.bb=null;this.bb_pos=0};o.EndOfStream.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};o.EndOfStream.getRootAsEndOfStream=function(t,e){return(e||new o.EndOfStream).__init(t.readInt32(t.position())+t.position(),t)};o.EndOfStream.startEndOfStream=function(t){t.startObject(0)};o.EndOfStream.endEndOfStream=function(t){var e=t.endObject();return e};o.Fulfilment=function(){this.bb=null;this.bb_pos=0};o.Fulfilment.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};o.Fulfilment.getRootAsFulfilment=function(t,e){return(e||new o.Fulfilment).__init(t.readInt32(t.position())+t.position(),t)};o.Fulfilment.prototype.serial=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)};o.Fulfilment.prototype.valueType=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):o.FulfilmentValue.NONE};o.Fulfilment.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null};o.Fulfilment.startFulfilment=function(t){t.startObject(3)};o.Fulfilment.addSerial=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))};o.Fulfilment.addValueType=function(t,e){t.addFieldInt8(1,e,o.FulfilmentValue.NONE)};o.Fulfilment.addValue=function(t,e){t.addFieldOffset(2,e,0)};o.Fulfilment.endFulfilment=function(t){var e=t.endObject();return e};var a=a||{};a.Error=function(){this.bb=null;this.bb_pos=0};a.Error.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};a.Error.getRootAsError=function(t,e){return(e||new a.Error).__init(t.readInt32(t.position())+t.position(),t)};a.Error.prototype.message=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};a.Error.startError=function(t){t.startObject(1)};a.Error.addMessage=function(t,e){t.addFieldOffset(0,e,0)};a.Error.endError=function(t){var e=t.endObject();return e};const f={};function u(t){const e=new r.ByteBuffer(new Uint8Array(t));const i=o.Fulfilment.getRootAsFulfilment(e);const s=i.serial().toFloat64();let n;let u;switch(i.valueType()){case o.FulfilmentValue.Data:{({data:n}=f[s]);const t=new o.Data;i.value(t);u=t.bytesArray();break}case o.FulfilmentValue.Error:{({error:n}=f[s]);const t=new a.Error;i.value(t);u=new Error(t.message());break}case o.FulfilmentValue.EndOfStream:({end:n}=f[s]);break;default:throw new Error("Unknown message recieved from runtime")}if(n===undefined){return}n(u)}function b(t,e,r,i){f[t]={data:e,error:r,end:i}}function d(t){return()=>{throw new Error(t)}}function h(t){const e=t();const i=new r.ByteBuffer(new Uint8Array(e));const s=o.DeferredResponse.getRootAsDeferredResponse(i);switch(s.retvalType()){case o.DeferredRetval.Error:{const t=new o.Error;s.retval(t);return Promise.reject(new Error(t.message()))}case o.DeferredRetval.Deferred:{const t=new o.Deferred;s.retval(t);const e=t.serial().toFloat64();return new Promise((t,r)=>{function i(t){delete f[e];return this(t)}b(e,i.bind(t),i.bind(r),i.bind(d("Unexpected EndOfStream for promisified deferred")))})}default:return Promise.reject(new Error("Failed to decode response from request"))}}V8Worker2.recv(u);var p=p||{};p.ReadArgs=function(){this.bb=null;this.bb_pos=0};p.ReadArgs.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};p.ReadArgs.getRootAsReadArgs=function(t,e){return(e||new p.ReadArgs).__init(t.readInt32(t.position())+t.position(),t)};p.ReadArgs.prototype.url=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};p.ReadArgs.prototype.timeout=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0};p.ReadArgs.startReadArgs=function(t){t.startObject(2)};p.ReadArgs.addUrl=function(t,e){t.addFieldOffset(0,e,0)};p.ReadArgs.addTimeout=function(t,e){t.addFieldInt32(1,e,0)};p.ReadArgs.endReadArgs=function(t){var e=t.endObject();return e};function l(t){const i=new r.Builder(512);const s=i.createString(t);p.ReadArgs.startReadArgs(i);p.ReadArgs.addUrl(i,s);const n=p.ReadArgs.endReadArgs(i);e.Message.startMessage(i);e.Message.addArgsType(i,e.Args.ReadArgs);e.Message.addArgs(i,n);const o=e.Message.endMessage(i);i.finish(o);return h(()=>V8Worker2.send(i.asArrayBuffer()))}var c=c||{};c.FileSystemRetval={NONE:0,FileInfo:1,Directory:2,Error:3};c.FileInfo=function(){this.bb=null;this.bb_pos=0};c.FileInfo.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};c.FileInfo.getRootAsFileInfo=function(t,e){return(e||new c.FileInfo).__init(t.readInt32(t.position())+t.position(),t)};c.FileInfo.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};c.FileInfo.prototype.path=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null};c.FileInfo.prototype.isdir=function(){var t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):false};c.FileInfo.startFileInfo=function(t){t.startObject(3)};c.FileInfo.addName=function(t,e){t.addFieldOffset(0,e,0)};c.FileInfo.addPath=function(t,e){t.addFieldOffset(1,e,0)};c.FileInfo.addIsdir=function(t,e){t.addFieldInt8(2,+e,+false)};c.FileInfo.endFileInfo=function(t){var e=t.endObject();return e};c.Directory=function(){this.bb=null;this.bb_pos=0};c.Directory.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};c.Directory.getRootAsDirectory=function(t,e){return(e||new c.Directory).__init(t.readInt32(t.position())+t.position(),t)};c.Directory.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};c.Directory.prototype.path=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null};c.Directory.prototype.files=function(t,e){var r=this.bb.__offset(this.bb_pos,8);return r?(e||new c.FileInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null};c.Directory.prototype.filesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0};c.Directory.startDirectory=function(t){t.startObject(3)};c.Directory.addName=function(t,e){t.addFieldOffset(0,e,0)};c.Directory.addPath=function(t,e){t.addFieldOffset(1,e,0)};c.Directory.addFiles=function(t,e){t.addFieldOffset(2,e,0)};c.Directory.createFilesVector=function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--){t.addOffset(e[r])}return t.endVector()};c.Directory.startFilesVector=function(t,e){t.startVector(4,e,4)};c.Directory.endDirectory=function(t){var e=t.endObject();return e};c.FileInfoArgs=function(){this.bb=null;this.bb_pos=0};c.FileInfoArgs.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};c.FileInfoArgs.getRootAsFileInfoArgs=function(t,e){return(e||new c.FileInfoArgs).__init(t.readInt32(t.position())+t.position(),t)};c.FileInfoArgs.prototype.path=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};c.FileInfoArgs.startFileInfoArgs=function(t){t.startObject(1)};c.FileInfoArgs.addPath=function(t,e){t.addFieldOffset(0,e,0)};c.FileInfoArgs.endFileInfoArgs=function(t){var e=t.endObject();return e};c.ListArgs=function(){this.bb=null;this.bb_pos=0};c.ListArgs.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};c.ListArgs.getRootAsListArgs=function(t,e){return(e||new c.ListArgs).__init(t.readInt32(t.position())+t.position(),t)};c.ListArgs.prototype.path=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null};c.ListArgs.startListArgs=function(t){t.startObject(1)};c.ListArgs.addPath=function(t,e){t.addFieldOffset(0,e,0)};c.ListArgs.endListArgs=function(t){var e=t.endObject();return e};c.FileSystemResponse=function(){this.bb=null;this.bb_pos=0};c.FileSystemResponse.prototype.__init=function(t,e){this.bb_pos=t;this.bb=e;return this};c.FileSystemResponse.getRootAsFileSystemResponse=function(t,e){return(e||new c.FileSystemResponse).__init(t.readInt32(t.position())+t.position(),t)};c.FileSystemResponse.prototype.retvalType=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):c.FileSystemRetval.NONE};c.FileSystemResponse.prototype.retval=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__union(t,this.bb_pos+e):null};c.FileSystemResponse.startFileSystemResponse=function(t){t.startObject(2)};c.FileSystemResponse.addRetvalType=function(t,e){t.addFieldInt8(0,e,c.FileSystemRetval.NONE)};c.FileSystemResponse.addRetval=function(t,e){t.addFieldOffset(1,e,0)};c.FileSystemResponse.endFileSystemResponse=function(t){var e=t.endObject();return e};class _{constructor(t,e,r){this.name=t;this.path=e;this.isdir=r}}class y{constructor(t,e,r){this.name=t;this.path=e;this.files=r}}function g(t){const i=new r.Builder(512);const s=i.createString(t);c.FileInfoArgs.startFileInfoArgs(i);c.FileInfoArgs.addPath(i,s);const n=c.FileInfoArgs.endFileInfoArgs(i);e.Message.startMessage(i);e.Message.addArgsType(i,e.Args.FileInfoArgs);e.Message.addArgs(i,n);const o=e.Message.endMessage(i);i.finish(o);const f=V8Worker2.send(i.asArrayBuffer());const u=new r.ByteBuffer(new Uint8Array(f));const b=c.FileSystemResponse.getRootAsFileSystemResponse(u);switch(b.retvalType()){case c.FileSystemRetval.FileInfo:{const t=new c.FileInfo;b.retval(t);return new _(t.name(),t.path(),t.isdir())}case c.FileSystemRetval.Error:{const t=new a.Error;b.retval(t);throw new Error(t.message())}default:throw new Error("Unexpected response to fileinfo")}}function I(t){const i=new r.Builder(512);const s=i.createString(t);c.ListArgs.startListArgs(i);c.ListArgs.addPath(i,s);const n=c.ListArgs.endListArgs(i);e.Message.startMessage(i);e.Message.addArgsType(i,e.Args.ListArgs);e.Message.addArgs(i,n);const o=e.Message.endMessage(i);i.finish(o);const f=V8Worker2.send(i.asArrayBuffer());const u=new r.ByteBuffer(new Uint8Array(f));const b=c.FileSystemResponse.getRootAsFileSystemResponse(u);switch(b.retvalType()){case c.FileSystemRetval.Directory:{const t=new c.Directory;b.retval(t);const e=new Array(t.filesLength());for(let r=0;r<e.length;r+=1){const i=t.files(r);e[r]=new _(i.name(),i.path(),i.isdir())}return new y(t.name(),t.path(),e)}case c.FileSystemRetval.Error:{const t=new a.Error;b.retval(t);throw new Error(t.message())}default:throw new Error("Unexpected response to fileinfo")}}var F={log:n,Format:i,write:s,read:l,info:g,dir:I};export default F;
